<!DOCTYPE html>
<html>
<head>
    <title>Icon Generator for Momentum Vita</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .icon-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 20px 0; }
        .icon-item { text-align: center; border: 1px solid #ddd; padding: 10px; border-radius: 8px; }
        canvas { border: 1px solid #ccc; }
        .download-btn { background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px; }
        .download-btn:hover { background: #2563eb; }
    </style>
</head>
<body>
    <h1>Momentum Vita - PWA Icon Generator</h1>
    <p>This tool generates all required PWA icon sizes from the SVG logo.</p>

    <div class="icon-grid" id="iconGrid"></div>

    <script>
        const iconSizes = [72, 96, 128, 144, 152, 192, 384, 512];

        // Load SVG and generate icons
        fetch('/logo.svg')
            .then(response => response.text())
            .then(svgText => {
                iconSizes.forEach(size => generateIcon(svgText, size));
            });

        function generateIcon(svgText, size) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = size;
            canvas.height = size;

            const img = new Image();
            const svgBlob = new Blob([svgText], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);

            img.onload = function() {
                // Clear canvas with transparent background
                ctx.clearRect(0, 0, size, size);

                // Draw SVG
                ctx.drawImage(img, 0, 0, size, size);

                // Create download link
                canvas.toBlob(blob => {
                    const downloadUrl = URL.createObjectURL(blob);

                    // Create UI element
                    const iconItem = document.createElement('div');
                    iconItem.className = 'icon-item';
                    iconItem.innerHTML = `
                        <h3>${size}x${size}</h3>
                        <canvas width="${Math.min(size, 100)}" height="${Math.min(size, 100)}"></canvas>
                        <br>
                        <button class="download-btn" onclick="downloadIcon('${downloadUrl}', 'icon-${size}x${size}.png')">
                            Download PNG
                        </button>
                    `;

                    // Draw preview
                    const previewCanvas = iconItem.querySelector('canvas');
                    const previewCtx = previewCanvas.getContext('2d');
                    const previewSize = Math.min(size, 100);
                    previewCtx.drawImage(img, 0, 0, previewSize, previewSize);

                    document.getElementById('iconGrid').appendChild(iconItem);
                }, 'image/png');

                URL.revokeObjectURL(url);
            };

            img.src = url;
        }

        function downloadIcon(url, filename) {
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Add download all button
        document.body.innerHTML += `
            <div style="text-align: center; margin: 40px 0;">
                <h2>Instructions:</h2>
                <ol style="text-align: left; max-width: 600px; margin: 0 auto;">
                    <li>Download all PNG files using the buttons above</li>
                    <li>Save them to the <code>public/icons/</code> directory</li>
                    <li>Name them exactly as: <code>icon-72x72.png</code>, <code>icon-96x96.png</code>, etc.</li>
                    <li>Your PWA manifest is already configured to use these icons</li>
                </ol>
                <p><strong>Note:</strong> Make sure to create the icons directory first: <code>public/icons/</code></p>
            </div>
        `;
    </script>
</body>
</html>